<%= render 'workspace/tabs', selected: :surveys, survey_count: listing.pager.count %>

<div class="d-flex justify-content-end">
  <%= link_to new_survey_path, class: 'btn btn-primary' do %>
    <%= icon 'fas', 'plus' %> New
  <% end %>
</div>

<% listing.surveys.each do |survey| %>
  <div class="survey border-bottom mt-3 mb-3 pb-3">
    <div class="d-flex justify-content-between">
      <div>
        <div class="h6">
          <%= link_to survey.name, survey_path(survey) %>
          <span class="badge bg-secondary">
            <%= survey_public_indicator(survey) %>
          </span>
          <span class="badge bg-info">
            <%= pluralize survey.replies.count, "records" %>
          </span>
        </div>
        <div>
          <div class="survey-description"><%= survey.description %></div>
          <div class="mt-2">
            <div><small><%= survey_preview_link(survey) %></small></div>
            <div class="mt-1">
              <%= survey_data_link(survey) %>&nbsp;
              <%= survey_stats_link(survey) %>
            </div>
          </div>
          <div class="d-flex align-items-center mt-2">
            <%= survey_status_indicator(survey, include_label: true) %>
            <small class="text-muted ms-3">Updated <%= time_ago_in_words survey.updated_at %> ago</small>
          </div>
        </div>
      </div>
      <div>
        <div class="d-flex justify-content-end align-items-center">
          <%= edit_survey_link(survey, include_label: true) %>
          <%= survey_share_dropdown(survey) %>
        </div>
        <div class="mt-2">
          <%= bumpspark_tag listing.reply_counts_for(survey) %>
        </div>
      </div>
    </div>
  </div>
<% end %>

<% if listing.show_pagination? %>
  <div class="d-flex justify-content-center align-items-center">
    <%== pagy_bootstrap_nav(listing.pager) %>
  </div>
<% end %>
